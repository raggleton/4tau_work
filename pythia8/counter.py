#!/usr/bin/python

# To add total number generated
# Get from the output files
# import os, os.path
# import glob
import re

def grep(filename, searchString):
	returnFilename=""
	with open(filename,"r") as file:
		for line in file:
			if re.search(re.escape(searchString), line):
				returnFilename = filename
	return returnFilename

# Do QCDb next

# Loop over all ROOT files
files = ["runQCDbBatch.sh.o262377", "runQCDbBatch.sh.o262470", "runQCDbBatch.sh.o262463", "runQCDbBatch.sh.o262464", "runQCDbBatch.sh.o254934", "runQCDbBatch.sh.o254933", "runQCDbBatch.sh.o254932", "runQCDbBatch.sh.o262342", "runQCDbBatch.sh.o257707", "runQCDbBatch.sh.o257704", "runQCDbBatch.sh.o257701", "runQCDbBatch.sh.o257618", "runQCDbBatch.sh.o257617", "runQCDbBatch.sh.o257616", "runQCDbBatch.sh.o254928", "runQCDbBatch.sh.o254927", "runQCDbBatch.sh.o262388", "runQCDbBatch.sh.o262386", "runQCDbBatch.sh.o257607", "runQCDbBatch.sh.o259591", "runQCDbBatch.sh.o259590", "runQCDbBatch.sh.o259589", "runQCDbBatch.sh.o259588", "runQCDbBatch.sh.o262452", "runQCDbBatch.sh.o262390", "runQCDbBatch.sh.o257615", "runQCDbBatch.sh.o257614", "runQCDbBatch.sh.o259553", "runQCDbBatch.sh.o259552", "runQCDbBatch.sh.o259551", "runQCDbBatch.sh.o259550", "runQCDbBatch.sh.o262341", "runQCDbBatch.sh.o257612", "runQCDbBatch.sh.o257611", "runQCDbBatch.sh.o257610", "runQCDbBatch.sh.o257613", "runQCDbBatch.sh.o254921", "runQCDbBatch.sh.o254920", "runQCDbBatch.sh.o254919", "runQCDbBatch.sh.o254937", "runQCDbBatch.sh.o254936", "runQCDbBatch.sh.o254935", "runQCDbBatch.sh.o262468", "runQCDbBatch.sh.o262399", "runQCDbBatch.sh.o262354", "runQCDbBatch.sh.o262351", "runQCDbBatch.sh.o262465", "runQCDbBatch.sh.o259572", "runQCDbBatch.sh.o259571", "runQCDbBatch.sh.o259569", "runQCDbBatch.sh.o259566", "runQCDbBatch.sh.o262382", "runQCDbBatch.sh.o262458", "runQCDbBatch.sh.o259578", "runQCDbBatch.sh.o259577", "runQCDbBatch.sh.o259576", "runQCDbBatch.sh.o262370", "runQCDbBatch.sh.o257660", "runQCDbBatch.sh.o257657", "runQCDbBatch.sh.o257654", "runQCDbBatch.sh.o262457", "runQCDbBatch.sh.o254924", "runQCDbBatch.sh.o254923", "runQCDbBatch.sh.o254922", "runQCDbBatch.sh.o254941", "runQCDbBatch.sh.o254940", "runQCDbBatch.sh.o254939", "runQCDbBatch.sh.o254938", "runQCDbBatch.sh.o254946", "runQCDbBatch.sh.o254945", "runQCDbBatch.sh.o259575", "runQCDbBatch.sh.o259574", "runQCDbBatch.sh.o259573", "runQCDbBatch.sh.o259581", "runQCDbBatch.sh.o259580", "runQCDbBatch.sh.o259579", "runQCDbBatch.sh.o259559", "runQCDbBatch.sh.o259558", "runQCDbBatch.sh.o259557", "runQCDbBatch.sh.o254926", "runQCDbBatch.sh.o257716", "runQCDbBatch.sh.o257713", "runQCDbBatch.sh.o257710", "runQCDbBatch.sh.o257632", "runQCDbBatch.sh.o257631", "runQCDbBatch.sh.o257630", "runQCDbBatch.sh.o262362", "runQCDbBatch.sh.o254918", "runQCDbBatch.sh.o254917", "runQCDbBatch.sh.o254916", "runQCDbBatch.sh.o257642", "runQCDbBatch.sh.o257641", "runQCDbBatch.sh.o257640", "runQCDbBatch.sh.o257639", "runQCDbBatch.sh.o257638", "runQCDbBatch.sh.o257637", "runQCDbBatch.sh.o257636", "runQCDbBatch.sh.o257645", "runQCDbBatch.sh.o257644", "runQCDbBatch.sh.o257643", "runQCDbBatch.sh.o259546", "runQCDbBatch.sh.o259545", "runQCDbBatch.sh.o259544", "runQCDbBatch.sh.o262398", "runQCDbBatch.sh.o262350", "runQCDbBatch.sh.o262402", "runQCDbBatch.sh.o262387", "runQCDbBatch.sh.o257634", "runQCDbBatch.sh.o257633", "runQCDbBatch.sh.o262460", "runQCDbBatch.sh.o262361", "runQCDbBatch.sh.o254944", "runQCDbBatch.sh.o254943", "runQCDbBatch.sh.o254942", "runQCDbBatch.sh.o259594", "runQCDbBatch.sh.o259593", "runQCDbBatch.sh.o259592", "runQCDbBatch.sh.o257651", "runQCDbBatch.sh.o257648", "runQCDbBatch.sh.o257646", "runQCDbBatch.sh.o262340", "runQCDbBatch.sh.o262339", "runQCDbBatch.sh.o262338", "runQCDbBatch.sh.o262392", "runQCDbBatch.sh.o262355", "runQCDbBatch.sh.o262359", "runQCDbBatch.sh.o262358", "runQCDbBatch.sh.o257669", "runQCDbBatch.sh.o257666", "runQCDbBatch.sh.o257663", "runQCDbBatch.sh.o254909", "runQCDbBatch.sh.o254908", "runQCDbBatch.sh.o254907", "runQCDbBatch.sh.o262347", "runQCDbBatch.sh.o254912", "runQCDbBatch.sh.o254911", "runQCDbBatch.sh.o254910", "runQCDbBatch.sh.o262397", "runQCDbBatch.sh.o262456", "runQCDbBatch.sh.o259562", "runQCDbBatch.sh.o259561", "runQCDbBatch.sh.o259560", "runQCDbBatch.sh.o262403", "runQCDbBatch.sh.o259527", "runQCDbBatch.sh.o259526", "runQCDbBatch.sh.o259525", "runQCDbBatch.sh.o262389", "runQCDbBatch.sh.o262454", "runQCDbBatch.sh.o262336", "runQCDbBatch.sh.o259584", "runQCDbBatch.sh.o259583", "runQCDbBatch.sh.o259582", "runQCDbBatch.sh.o257684", "runQCDbBatch.sh.o257681", "runQCDbBatch.sh.o257678", "runQCDbBatch.sh.o257675", "runQCDbBatch.sh.o257672", "runQCDbBatch.sh.o262400", "runQCDbBatch.sh.o262366", "runQCDbBatch.sh.o257690", "runQCDbBatch.sh.o257687", "runQCDbBatch.sh.o262404", "runQCDbBatch.sh.o262391", "runQCDbBatch.sh.o262394", "runQCDbBatch.sh.o262374", "runQCDbBatch.sh.o262453", "runQCDbBatch.sh.o262405", "runQCDbBatch.sh.o257626", "runQCDbBatch.sh.o257625", "runQCDbBatch.sh.o257624", "runQCDbBatch.sh.o262353", "runQCDbBatch.sh.o262375", "runQCDbBatch.sh.o259587", "runQCDbBatch.sh.o259586", "runQCDbBatch.sh.o259585", "runQCDbBatch.sh.o262357", "runQCDbBatch.sh.o262401", "runQCDbBatch.sh.o259607", "runQCDbBatch.sh.o259606", "runQCDbBatch.sh.o259605", "runQCDbBatch.sh.o259604", "runQCDbBatch.sh.o262467", "runQCDbBatch.sh.o257726", "runQCDbBatch.sh.o257722", "runQCDbBatch.sh.o257719", "runQCDbBatch.sh.o262345", "runQCDbBatch.sh.o254915", "runQCDbBatch.sh.o254914", "runQCDbBatch.sh.o254913", "runQCDbBatch.sh.o262384", "runQCDbBatch.sh.o257629", "runQCDbBatch.sh.o257628", "runQCDbBatch.sh.o257627", "runQCDbBatch.sh.o262393", "runQCDbBatch.sh.o262381", "runQCDbBatch.sh.o262352", "runQCDbBatch.sh.o259549", "runQCDbBatch.sh.o259548", "runQCDbBatch.sh.o259547", "runQCDbBatch.sh.o262376", "runQCDbBatch.sh.o262337", "runQCDbBatch.sh.o257603", "runQCDbBatch.sh.o259530", "runQCDbBatch.sh.o259529", "runQCDbBatch.sh.o259528", "runQCDbBatch.sh.o259540", "runQCDbBatch.sh.o259539", "runQCDbBatch.sh.o259538", "runQCDbBatch.sh.o259597", "runQCDbBatch.sh.o259596", "runQCDbBatch.sh.o259595", "runQCDbBatch.sh.o257738", "runQCDbBatch.sh.o257735", "runQCDbBatch.sh.o257732", "runQCDbBatch.sh.o257729", "runQCDbBatch.sh.o262433", "runQCDbBatch.sh.o262406", "runQCDbBatch.sh.o262411", "runQCDbBatch.sh.o259537", "runQCDbBatch.sh.o259536", "runQCDbBatch.sh.o259535", "runQCDbBatch.sh.o262459", "runQCDbBatch.sh.o262378", "runQCDbBatch.sh.o262372", "runQCDbBatch.sh.o259543", "runQCDbBatch.sh.o259542", "runQCDbBatch.sh.o259541", "runQCDbBatch.sh.o262379", "runQCDbBatch.sh.o262472", "runQCDbBatch.sh.o262363", "runQCDbBatch.sh.o259600", "runQCDbBatch.sh.o259599", "runQCDbBatch.sh.o259598", "runQCDbBatch.sh.o257609", "runQCDbBatch.sh.o257608", "runQCDbBatch.sh.o257747", "runQCDbBatch.sh.o257744", "runQCDbBatch.sh.o257741", "runQCDbBatch.sh.o262371", "runQCDbBatch.sh.o262471", "runQCDbBatch.sh.o262335", "runQCDbBatch.sh.o262334", "runQCDbBatch.sh.o262346", "runQCDbBatch.sh.o262368", "runQCDbBatch.sh.o259533", "runQCDbBatch.sh.o259532", "runQCDbBatch.sh.o259531", "runQCDbBatch.sh.o262349", "runQCDbBatch.sh.o254925", "runQCDbBatch.sh.o257635", "runQCDbBatch.sh.o254931", "runQCDbBatch.sh.o254930", "runQCDbBatch.sh.o254929", "runQCDbBatch.sh.o257602", "runQCDbBatch.sh.o257601", "runQCDbBatch.sh.o257600", "runQCDbBatch.sh.o262461", "runQCDbBatch.sh.o262455", "runQCDbBatch.sh.o262385", "runQCDbBatch.sh.o257606", "runQCDbBatch.sh.o257605", "runQCDbBatch.sh.o257604", "runQCDbBatch.sh.o262469", "runQCDbBatch.sh.o262343", "runQCDbBatch.sh.o259603", "runQCDbBatch.sh.o259602", "runQCDbBatch.sh.o259601", "runQCDbBatch.sh.o262462", "runQCDbBatch.sh.o262367", "runQCDbBatch.sh.o262365", "runQCDbBatch.sh.o262383", "runQCDbBatch.sh.o262473", "runQCDbBatch.sh.o262380", "runQCDbBatch.sh.o259534", "runQCDbBatch.sh.o262356", "runQCDbBatch.sh.o257622", "runQCDbBatch.sh.o257621", "runQCDbBatch.sh.o257620", "runQCDbBatch.sh.o257619", "runQCDbBatch.sh.o262422", "runQCDbBatch.sh.o262395", "runQCDbBatch.sh.o259565", "runQCDbBatch.sh.o259564", "runQCDbBatch.sh.o259563", "runQCDbBatch.sh.o262373", "runQCDbBatch.sh.o262333", "runQCDbBatch.sh.o259556", "runQCDbBatch.sh.o259555", "runQCDbBatch.sh.o259554", "runQCDbBatch.sh.o262369", "runQCDbBatch.sh.o262344", "runQCDbBatch.sh.o262348", "runQCDbBatch.sh.o262466", "runQCDbBatch.sh.o262360", "runQCDbBatch.sh.o262396", "runQCDbBatch.sh.o257698", "runQCDbBatch.sh.o257695", "runQCDbBatch.sh.o257693", "runQCDbBatch.sh.o262443", "runQCDbBatch.sh.o254408"]
nfilesB = len(files)
totalB = 0.0
BfilesCounted = 0.0 # count number that actually contribute to sum
print nfilesB,"QCDb files"

for f in files:
	with open(f,"r") as file:
		for line in file:
			if re.search("\| sum",line):
				# print line
				values = line.split()
				numberEvents = int(values[5])
				if int(values[5]) > 0:
					totalB += int(values[5])
					print int(values[5])
					BfilesCounted += 1
				break

print "TOTAL NUMBER OF B EVENTS COUNTED: ", totalB
print "SHOULD BE: ", nfilesB*(totalB/float(BfilesCounted))
print "AVERAGE EVT/FILE: ", (totalB/float(BfilesCounted))
print "FILES COUNTED: ", BfilesCounted
